(function(e){function t(t){for(var r,o,c=t[0],i=t[1],s=t[2],l=0,d=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);f&&f(t);while(d.length)d.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(u.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a={app:0},u=[];function c(e){return i.p+"static/js/"+({}[e]||e)+"."+{"chunk-15efc9ec":"e25fe3be","chunk-1e24dcff":"0087d55f","chunk-20605a90":"29e35b2e","chunk-255796c8":"ff993b99","chunk-5105f638":"5f4e1730","chunk-55ce335a":"722de65f","chunk-720f1373":"5fa3a38e","chunk-deb01aa8":"72b994db","chunk-e3d77e52":"58a78400"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-15efc9ec":1,"chunk-1e24dcff":1,"chunk-20605a90":1,"chunk-255796c8":1,"chunk-5105f638":1,"chunk-55ce335a":1,"chunk-720f1373":1,"chunk-deb01aa8":1,"chunk-e3d77e52":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="static/css/"+({}[e]||e)+"."+{"chunk-15efc9ec":"ef5ac660","chunk-1e24dcff":"2004854a","chunk-20605a90":"5bc84ba9","chunk-255796c8":"6bb05d93","chunk-5105f638":"b371d1e3","chunk-55ce335a":"7ba95022","chunk-720f1373":"8fae2a0a","chunk-deb01aa8":"22789d8c","chunk-e3d77e52":"45186941"}[e]+".css",a=i.p+r,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var s=u[c],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===a))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){s=d[c],l=s.getAttribute("data-href");if(l===r||l===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||a,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete o[e],f.parentNode.removeChild(f),n(u)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var u=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=u);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=c(e);var d=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}a[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var f=l;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),o=n.n(r);o.a},2423:function(e,t,n){"use strict";n.d(t,"r",(function(){return s})),n.d(t,"j",(function(){return l})),n.d(t,"s",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"q",(function(){return h})),n.d(t,"l",(function(){return m})),n.d(t,"p",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"o",(function(){return g})),n.d(t,"e",(function(){return k})),n.d(t,"f",(function(){return _})),n.d(t,"a",(function(){return w})),n.d(t,"m",(function(){return O})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return j})),n.d(t,"i",(function(){return x})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return S})),n.d(t,"t",(function(){return P})),n.d(t,"u",(function(){return T}));n("d3b7");var r=n("bc3a"),o=n.n(r),a=n("5c96"),u=n("f3e4"),c=o.a.create({baseURL:"http://47.96.117.121:5003/api/",withCredentials:!0});c.interceptors.request.use((function(e){return Object(u["a"])()&&(e.headers["token"]=Object(u["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),c.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(a["Message"])({message:t.message||"服务器错误",type:"error",duration:2e3}),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(a["Message"])({message:e.message,type:"error",duration:2e3}),Promise.reject(e)}));var i=c;function s(e){return i({url:"user/login",method:"post",data:e})}function l(e){return i({url:"user/info",method:"get",params:{token:e}})}function d(){return i({url:"user/logout",method:"post"})}function f(e){return i({url:"loan/create",method:"post",data:e})}function p(e){return i({url:"loan/list",method:"get",params:e})}function h(e){return i({url:"loan/update",method:"put",data:e})}function m(e){return i({url:"loan/delete/"+e.id,method:"delete"})}function b(e){return i({url:"loan/submitToApprove",method:"post",data:e})}function v(e){return i({url:"approve/first/list",method:"get",params:e})}function g(e){return i({url:"loan/query",method:"get",params:e})}function k(e){return i({url:"approve/first/pass",method:"post",data:e})}function _(e){return i({url:"approve/first/reject",method:"post",data:e})}function w(e){return i({url:"approve/end/list",method:"get",params:e})}function O(e){return i({url:"loan/query",method:"get",params:e})}function y(e){return i({url:"approve/end/pass",method:"post",data:e})}function j(e){return i({url:"approve/end/reject",method:"post",data:e})}function x(e){return i({url:"contract/list",method:"get",params:e})}function E(e){return i({url:"contract/createFile",method:"post",data:e})}function S(e){return i({url:"contract/download",method:"get",params:e})}function P(e){return i({url:"permission/createUser",method:"post",data:e})}function T(){return i({url:"user/list",method:"get"})}},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],u=(n("034f"),n("2877")),c={},i=Object(u["a"])(c,o,a,!1,null,null,null),s=i.exports,l=(n("d3b7"),n("8c4f")),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-aside",{attrs:{width:"200px",id:"Slide"}},[n("el-scrollbar",[n("Slidebar")],1)],1),n("el-container",[n("el-header",[n("Nav")],1),n("el-main",[n("Main")],1)],1)],1)},f=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":"/"+e.$route.matched[1].name,"text-color":"#9bb0be","active-text-color":"#3980cb","background-color":"#304156","unique-opened":""}},e._l(e.permission_routes,(function(e){return n("sidebar-item",{key:e.path,attrs:{item:e,"base-path":e.path}})})),1)},h=[],m=n("5530"),b=n("2f62"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.hasChild(e.item.children,e.item)?n("el-menu-item",{attrs:{index:e.resolvePath(e.basePath)}},[n("span",[e._v(e._s(e.d&&e.d.meta&&e.d.meta.title))])]):n("el-submenu",{attrs:{index:e.basePath}},[n("template",{slot:"title"},[n("span",[e._v(e._s(e.item.meta.title))])]),e._l(e.item.children,(function(t){return n("sidebar-item",{key:t.path,attrs:{item:t,"base-path":e.resolvePath(t.path)}})}))],2)],1)},g=[],k=(n("4de4"),n("df7c")),_=n.n(k),w={name:"SidebarItem",props:["item","basePath"],data:function(){return{d:null}},methods:{hasChild:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=t.filter((function(t){return!!t&&(e.d=t,!0)}));return 0===r.length?(this.d=Object(m["a"])({},n),!0):1===r.length},resolvePath:function(e){return _.a.resolve(this.basePath,e)}}},O=w,y=Object(u["a"])(O,v,g,!1,null,null,null),j=y.exports,x={name:"Slidebar",data:function(){return{}},components:{SidebarItem:j},computed:Object(m["a"])({},Object(b["b"])(["permission_routes"])),mounted:function(){console.log(this.permission_routes)}},E=x,S=(n("5b92"),Object(u["a"])(E,p,h,!1,null,"4118c896",null)),P=S.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("div",{staticClass:"breadcrumb"},[n("i",{staticClass:"tubiao el-icon-s-unfold"}),n("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.lists,(function(t,r){return n("el-breadcrumb-item",{key:r},[e._v(e._s(t.meta.title))])})),1)],1),n("div",{staticClass:"right-dropdown"},[n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[e._v(" 退出"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("span",{staticStyle:{display:"block"},on:{click:e.logout}},[e._v("退出")])])],1)],1)],1)])},C=[],L={name:"Nav",data:function(){return{lists:[]}},methods:{getRouter:function(){console.log(this.$route.matched),this.lists=this.$route.matched.filter((function(e){return e.meta&&e.meta.title}))},logout:function(){var e=this;this.$store.dispatch("Logout").then((function(t){console.log(t),e.$router.push("/login")})).catch((function(e){console.log(e)}))}},created:function(){this.getRouter()},watch:{$route:function(e,t){console.log(e),console.log(t),this.getRouter()}}},R=L,$=(n("9688"),Object(u["a"])(R,T,C,!1,null,"3e1f9c48",null)),N=$.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},A=[],q={name:"Main"},I=q,U=Object(u["a"])(I,M,A,!1,null,"1b0eeb83",null),G=U.exports,K={name:"Layout",components:{Slidebar:P,Nav:N,Main:G}},B=K,D=(n("a937"),Object(u["a"])(B,d,f,!1,null,"b50a5724",null)),F=D.exports,J={path:"/permission",redirect:"/permission/create",component:F,meta:{title:"权限管理"},children:[{path:"create",name:"permission/create",component:function(){return n.e("chunk-e3d77e52").then(n.bind(null,"7f1b"))},meta:{title:"创建管理员"}},{path:"list",name:"permission/list",component:function(){return n.e("chunk-55ce335a").then(n.bind(null,"33c5"))},meta:{title:"列表展示"}}]},H=J;r["default"].use(l["a"]);var V=[{path:"/login",name:"login",component:function(){return n.e("chunk-deb01aa8").then(n.bind(null,"9ed6"))}},{path:"/",component:F,redirect:"/home",children:[{path:"home",component:function(){return n.e("chunk-15efc9ec").then(n.bind(null,"7abe"))},name:"home",meta:{title:"首页"}}]}],z=[{path:"/loan-input",component:F,redirect:"/loan-input/index",meta:{roles:["input"]},children:[{path:"index",component:function(){return n.e("chunk-1e24dcff").then(n.bind(null,"a5b5"))},name:"loan-input",meta:{title:"贷款申请"}}]},{path:"/input-manager",redirect:"/input-manager/index",component:F,meta:{roles:["input"]},children:[{path:"index",component:function(){return n.e("chunk-5105f638").then(n.bind(null,"dc0e"))},name:"input-manager",meta:{title:"申请管理"}}]},{path:"/loan-approve",component:F,redirect:"/loan-approve/first",meta:{title:"贷款审批",roles:["approve"]},children:[{path:"first",component:function(){return n.e("chunk-255796c8").then(n.bind(null,"d9be"))},name:"loan-approve/first",meta:{title:"初审"}},{path:"end",component:function(){return n.e("chunk-720f1373").then(n.bind(null,"68a6"))},name:"loan-approve/end",meta:{title:"终审"}}]},{path:"/contract",component:F,redirect:"/contract/index",children:[{path:"index",component:function(){return n.e("chunk-20605a90").then(n.bind(null,"7ffa"))},name:"contract",meta:{title:"标的管理"}}]},H,{path:"*",redirect:"/login"}],Q=new l["a"]({routes:V}),W=n("2423"),X=n("f3e4"),Y={token:Object(X["a"])(),roles:[]},Z={toten:function(e){return e.token},roles:function(e){return e.roles}},ee={SET_TOKEN:function(e,t){e.token=t},SET_ROLES:function(e,t){e.roles=t}},te={Login:function(e,t){var n=e.commit;return new Promise((function(e,r){Object(W["r"])(t).then((function(t){2e4===t.code&&(n("SET_TOKEN",t.data.token),Object(X["b"])(t.data.token),e(t))})).catch((function(e){console.log(e),r(e)}))}))},GetInfo:function(e){var t=e.commit,n=e.state;return new Promise((function(e,r){Object(W["j"])(n.token).then((function(n){var o=n.data;o||r("Verification failed, please Login again."),t("SET_ROLES",o.roles),e(o),console.log(o)})).catch((function(e){r(e)}))}))},Logout:function(e){var t=e.commit,n=e.state;return new Promise((function(e,r){Object(W["s"])(n.token).then((function(){t("SET_TOKEN",""),t("SET_ROLES",[]),e()})).catch((function(e){r(e)}))}))}},ne={state:Y,getters:Z,mutations:ee,actions:te};n("99af"),n("4160"),n("caad"),n("45fc"),n("2532"),n("159b");function re(e,t){var n=[];return e.forEach((function(e){var r=e.meta&&e.meta.roles&&t.some((function(t){return e.meta.roles.includes(t)}));r&&n.push(e)})),n}var oe={routes:[]},ae={permission_routes:function(e){return e.routes}},ue={SET_ROUTES:function(e,t){e.routes=V.concat(t)}},ce={GenerateRoutes:function(e,t){var n=e.commit;return new Promise((function(e){var r;r=t.includes("administrator")?z:re(z,t),n("SET_ROUTES",r),e(r)}))}},ie={state:oe,getters:ae,mutations:ue,actions:ce};r["default"].use(b["a"]);var se=new b["a"].Store({modules:{user:ne,permission:ie}}),le=n("5c96"),de=n.n(le),fe=(n("0fae"),n("e05f"),n("c975"),n("d81d"),n("b0c0"),n("96cf"),n("1da1")),pe=["/login"];Q.beforeEach(function(){var e=Object(fe["a"])(regeneratorRuntime.mark((function e(t,n,r){var o,a,u,c,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=Object(X["a"])(),!o){e.next=31;break}if("/login"!=t.path){e.next=6;break}r(),e.next=29;break;case 6:if(a=se&&se.getters.roles&&se.getters.roles.length>0,!a){e.next=11;break}r(),e.next=29;break;case 11:return e.prev=11,e.next=14,se.dispatch("GetInfo");case 14:return u=e.sent,c=u.roles,i=c.map((function(e){return e.name})),console.log(i),e.next=20,se.dispatch("GenerateRoutes",i);case 20:s=e.sent,Q.addRoutes(s),r(),e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](11),le["Message"].error("token失效"),r({path:"/login"});case 29:e.next=32;break;case 31:-1!==pe.indexOf(t.path)?r():r("/login?redirect=".concat(t.path));case 32:case"end":return e.stop()}}),e,null,[[11,25]])})));return function(t,n,r){return e.apply(this,arguments)}}()),r["default"].use(de.a),r["default"].config.productionTip=!1,r["default"].prototype.url="http://47.96.117.121:5003",new r["default"]({router:Q,store:se,render:function(e){return e(s)}}).$mount("#app")},"5b92":function(e,t,n){"use strict";var r=n("9965"),o=n.n(r);o.a},"81c1":function(e,t,n){},"85ec":function(e,t,n){},9688:function(e,t,n){"use strict";var r=n("a2ef"),o=n.n(r);o.a},9965:function(e,t,n){},a2ef:function(e,t,n){},a937:function(e,t,n){"use strict";var r=n("81c1"),o=n.n(r);o.a},f3e4:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c}));var r=n("a78e"),o=n.n(r),a="Admin-Token";function u(e){return o.a.set(a,e)}function c(){return o.a.get(a)}}});
//# sourceMappingURL=app.aee4e329.js.map